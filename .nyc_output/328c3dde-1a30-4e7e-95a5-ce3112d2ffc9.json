{"/home/rick/Dokumente/Privat/golden-key/src/server/index.ts":{"path":"/home/rick/Dokumente/Privat/golden-key/src/server/index.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":21}},"4":{"start":{"line":7,"column":0},"end":{"line":7,"column":25}},"5":{"start":{"line":8,"column":16},"end":{"line":8,"column":51}},"6":{"start":{"line":9,"column":13},"end":{"line":9,"column":45}},"7":{"start":{"line":10,"column":17},"end":{"line":10,"column":53}},"8":{"start":{"line":11,"column":20},"end":{"line":11,"column":59}},"9":{"start":{"line":12,"column":22},"end":{"line":12,"column":63}},"10":{"start":{"line":13,"column":15},"end":{"line":13,"column":57}},"11":{"start":{"line":14,"column":15},"end":{"line":14,"column":51}},"12":{"start":{"line":15,"column":10},"end":{"line":15,"column":34}},"13":{"start":{"line":16,"column":0},"end":{"line":16,"column":18}},"14":{"start":{"line":17,"column":11},"end":{"line":17,"column":35}},"15":{"start":{"line":18,"column":18},"end":{"line":18,"column":44}},"16":{"start":{"line":19,"column":0},"end":{"line":19,"column":40}},"17":{"start":{"line":20,"column":9},"end":{"line":20,"column":38}},"18":{"start":{"line":21,"column":0},"end":{"line":21,"column":62}},"19":{"start":{"line":22,"column":0},"end":{"line":22,"column":38}},"20":{"start":{"line":23,"column":0},"end":{"line":23,"column":40}},"21":{"start":{"line":24,"column":0},"end":{"line":24,"column":118}},"22":{"start":{"line":25,"column":0},"end":{"line":25,"column":46}},"23":{"start":{"line":26,"column":0},"end":{"line":26,"column":41}},"24":{"start":{"line":27,"column":0},"end":{"line":29,"column":3}},"25":{"start":{"line":28,"column":4},"end":{"line":28,"column":78}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":27,"column":17},"end":{"line":27,"column":18}},"loc":{"start":{"line":27,"column":29},"end":{"line":29,"column":1}},"line":27}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":7,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1},"f":{"0":7,"1":1},"b":{"0":[1,1,1],"1":[2,5],"2":[7,7]},"inputSourceMap":{"version":3,"file":"/home/rick/Dokumente/Privat/golden-key/src/server/index.ts","sources":["/home/rick/Dokumente/Privat/golden-key/src/server/index.ts"],"names":[],"mappings":";;;;;;AAAA,yBAAuB;AACvB,oDAA+C;AAC/C,8CAAwB;AACxB,sDAAgC;AAChC,4DAAqC;AACrC,gEAAyC;AACzC,0DAAoC;AAEpC,oDAA8B;AAE9B,IAAM,GAAG,GAAiB,IAAA,iBAAO,GAAE,CAAC;AAmB3B,kBAAG;AAlBZ,IAAM,IAAI,GAAG,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;AACtC,IAAM,WAAW,GAAG,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;AAE/C,kBAAQ,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;AAC9B,IAAM,EAAE,GAAyB,kBAAQ,CAAC,UAAU,CAAC;AAErD,GAAG,CAAC,GAAG,CAAC,qBAAU,CAAC,UAAU,CAAE,EAAE,QAAQ,EAAC,IAAI,EAAE,CAAC,CAAE,CAAC;AACpD,GAAG,CAAC,GAAG,CAAC,qBAAU,CAAC,IAAI,EAAE,CAAC,CAAC;AAC3B,GAAG,CAAC,GAAG,CAAC,IAAA,uBAAY,GAAE,CAAC,CAAC;AACxB,GAAG,CAAC,GAAG,CAAC,SAAS,EAAE,iBAAO,CAAC,MAAM,CAAC,cAAI,CAAC,IAAI,CAAC,SAAS,EAAE,qBAAqB,CAAC,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;AAClG,GAAG,CAAC,GAAG,CAAC,YAAY,EAAE,gBAAM,CAAC,KAAK,CAAC,CAAC;AACpC,GAAG,CAAC,GAAG,CAAC,IAAI,EAAE,gBAAM,CAAC,QAAQ,CAAC,CAAC;AAE/B,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE;IAEb,gBAAM,CAAC,IAAI,CAAC,6CAAuC,IAAI,CAAG,CAAC,CAAC;AAChE,CAAC,CAAC,CAAC","sourcesContent":["import 'dotenv/config';\nimport express, { Application } from 'express';\nimport path from 'path';\nimport mongoose from 'mongoose';\nimport bodyParser from 'body-parser';\nimport cookieParser from 'cookie-parser';\nimport logger from './utils/logger';\n\nimport routes from './routes';\n\nconst app : Application = express();\nconst port = Number(process.env.PORT);\nconst databaseUrl = String(process.env.DB_URL);\n\nmongoose.connect(databaseUrl);\nconst db : mongoose.Connection = mongoose.connection;\n\napp.use(bodyParser.urlencoded( { extended:true }) );\napp.use(bodyParser.json());\napp.use(cookieParser());\napp.use('/static', express.static(path.join(__dirname, '../../build/client/'), { index: false }));\napp.use('/api/users', routes.users);\napp.use('/*', routes.frontend);\n\napp.listen(port, () =>\n{\n    logger.info(`Server running at http://localhost:${ port }`);\n});\n\nexport { app };\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d4f9e09f733d28beaebfabca05132b31aa2fe2a1"},"/home/rick/Dokumente/Privat/golden-key/src/server/utils/logger.ts":{"path":"/home/rick/Dokumente/Privat/golden-key/src/server/utils/logger.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":6,"column":0},"end":{"line":6,"column":62}},"3":{"start":{"line":7,"column":0},"end":{"line":7,"column":25}},"4":{"start":{"line":8,"column":15},"end":{"line":8,"column":49}},"5":{"start":{"line":9,"column":18},"end":{"line":9,"column":50}},"6":{"start":{"line":10,"column":0},"end":{"line":13,"column":3}},"7":{"start":{"line":14,"column":0},"end":{"line":14,"column":58}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1},"f":{"0":1},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"/home/rick/Dokumente/Privat/golden-key/src/server/utils/logger.ts","sources":["/home/rick/Dokumente/Privat/golden-key/src/server/utils/logger.ts"],"names":[],"mappings":";;;;;;AAAA,yBAAuB;AACvB,kDAA4B;AAE5B,IAAM,WAAW,GAAG,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;AAErD,gBAAM,CAAC,SAAS,CAAC;IACb,SAAS,YAAI,GAAE,WAAW,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAE;IAClD,UAAU,EAAE,EAAE,OAAO,EAAE,EAAE,SAAS,EAAE,CAAE,WAAW,CAAE,EAAE,KAAK,EAAE,MAAM,EAAE,EAAE;CACzE,CAAC,CAAC;AAEH,kBAAe,gBAAM,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC","sourcesContent":["import 'dotenv/config';\nimport log4js from 'log4js';\n\nconst serviceName = String(process.env.SERVICE_NAME);\n\nlog4js.configure({\n    appenders: { [ serviceName ]: { type: 'stdout' } },\n    categories: { default: { appenders: [ serviceName ], level: 'info' } }\n});\n\nexport default log4js.getLogger(serviceName);\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"07fdbe457eabe849faa11ee1049fb883cd653396"},"/home/rick/Dokumente/Privat/golden-key/src/server/routes/index.ts":{"path":"/home/rick/Dokumente/Privat/golden-key/src/server/routes/index.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":17},"end":{"line":6,"column":55}},"4":{"start":{"line":7,"column":14},"end":{"line":7,"column":53}},"5":{"start":{"line":8,"column":0},"end":{"line":11,"column":2}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":2,"2":1,"3":1,"4":1,"5":1},"f":{"0":2},"b":{"0":[1,1,1],"1":[2,0],"2":[2,2]},"inputSourceMap":{"version":3,"file":"/home/rick/Dokumente/Privat/golden-key/src/server/routes/index.ts","sources":["/home/rick/Dokumente/Privat/golden-key/src/server/routes/index.ts"],"names":[],"mappings":";;;;;AAAA,wDAAkC;AAClC,sDAAgC;AAEhC,kBAAe;IACX,QAAQ,oBAAA;IACR,KAAK,iBAAA;CACR,CAAC","sourcesContent":["import frontend from './frontend';\nimport users from './api/users';\n\nexport default {\n    frontend,\n    users\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4f5ed5b270740435e487dbe327c0264a43292cab"},"/home/rick/Dokumente/Privat/golden-key/src/server/routes/frontend.ts":{"path":"/home/rick/Dokumente/Privat/golden-key/src/server/routes/frontend.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":16},"end":{"line":6,"column":34}},"4":{"start":{"line":7,"column":20},"end":{"line":7,"column":64}},"5":{"start":{"line":8,"column":13},"end":{"line":8,"column":36}},"6":{"start":{"line":9,"column":0},"end":{"line":10,"column":41}},"7":{"start":{"line":11,"column":0},"end":{"line":11,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1},"f":{"0":1},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1]},"inputSourceMap":{"version":3,"file":"/home/rick/Dokumente/Privat/golden-key/src/server/routes/frontend.ts","sources":["/home/rick/Dokumente/Privat/golden-key/src/server/routes/frontend.ts"],"names":[],"mappings":";;;;;AAAA,mCAAiC;AAEjC,iEAA2C;AAE3C,IAAM,MAAM,GAAG,IAAA,gBAAM,GAAE,CAAC;AAExB,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC;KACb,GAAG,CAAC,qBAAW,CAAC,QAAQ,CAAC,CAAC;AAE/B,kBAAe,MAAM,CAAC","sourcesContent":["import { Router } from 'express';\n\nimport controllers from './../controllers';\n\nconst router = Router();\n\nrouter.route('/*')\n    .get(controllers.frontend);\n\nexport default router;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8dd3209f32b28ab0a57544e833a9ce3fa29a7b20"},"/home/rick/Dokumente/Privat/golden-key/src/server/controllers/index.ts":{"path":"/home/rick/Dokumente/Privat/golden-key/src/server/controllers/index.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":17},"end":{"line":6,"column":55}},"4":{"start":{"line":7,"column":14},"end":{"line":7,"column":53}},"5":{"start":{"line":8,"column":0},"end":{"line":16,"column":2}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":2,"2":1,"3":1,"4":1,"5":1},"f":{"0":2},"b":{"0":[1,1,1],"1":[2,0],"2":[2,2]},"inputSourceMap":{"version":3,"file":"/home/rick/Dokumente/Privat/golden-key/src/server/controllers/index.ts","sources":["/home/rick/Dokumente/Privat/golden-key/src/server/controllers/index.ts"],"names":[],"mappings":";;;;;AAAA,wDAAkC;AAClC,sDAAgC;AAEhC,kBAAe;IACX,QAAQ,oBAAA;IACR,KAAK,EAAE;QACH,MAAM,EAAE,eAAK,CAAC,MAAM;QACpB,KAAK,EAAE,eAAK,CAAC,KAAK;QAClB,MAAM,EAAE,eAAK,CAAC,MAAM;QACpB,SAAS,EAAE,eAAK,CAAC,SAAS;KAC7B;CACJ,CAAC","sourcesContent":["import frontend from './frontend';\nimport users from './api/users';\n\nexport default {\n    frontend,\n    users: {\n        signup: users.signup,\n        login: users.login,\n        logout: users.logout,\n        authorize: users.authorize\n    }\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ea00082dd2575395fd84d96a555f2c33a0627166"},"/home/rick/Dokumente/Privat/golden-key/src/server/controllers/frontend.ts":{"path":"/home/rick/Dokumente/Privat/golden-key/src/server/controllers/frontend.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":13},"end":{"line":6,"column":45}},"4":{"start":{"line":7,"column":17},"end":{"line":9,"column":1}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":90}},"6":{"start":{"line":10,"column":0},"end":{"line":10,"column":29}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":18}},"loc":{"start":{"line":7,"column":37},"end":{"line":9,"column":1}},"line":7}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":7,"6":1},"f":{"0":1,"1":7},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"/home/rick/Dokumente/Privat/golden-key/src/server/controllers/frontend.ts","sources":["/home/rick/Dokumente/Privat/golden-key/src/server/controllers/frontend.ts"],"names":[],"mappings":";;;;;AAAA,8CAAwB;AAIxB,IAAM,UAAU,GAAG,UAAC,GAAa,EAAE,GAAc;IAE7C,GAAG,CAAC,QAAQ,CAAC,cAAI,CAAC,IAAI,CAAC,SAAS,EAAE,yBAAyB,EAAE,YAAY,CAAC,CAAC,CAAC;AAChF,CAAC,CAAC;AAEF,kBAAe,UAAU,CAAC","sourcesContent":["import path from 'path';\n\nimport { Request, Response } from 'express';\n\nconst controller = (req : Request, res : Response) =>\n{\n    res.sendFile(path.join(__dirname, './../../../build/client', 'index.html'));\n};\n\nexport default controller;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"93b8a344dcbb7e74915a5dc8134ca30cde3c829b"},"/home/rick/Dokumente/Privat/golden-key/src/server/controllers/api/users.ts":{"path":"/home/rick/Dokumente/Privat/golden-key/src/server/controllers/api/users.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"4":{"start":{"line":7,"column":26},"end":{"line":7,"column":54}},"5":{"start":{"line":8,"column":15},"end":{"line":8,"column":61}},"6":{"start":{"line":9,"column":14},"end":{"line":9,"column":38}},"7":{"start":{"line":10,"column":15},"end":{"line":10,"column":39}},"8":{"start":{"line":11,"column":13},"end":{"line":33,"column":1}},"9":{"start":{"line":12,"column":13},"end":{"line":12,"column":21}},"10":{"start":{"line":12,"column":34},"end":{"line":12,"column":45}},"11":{"start":{"line":12,"column":58},"end":{"line":12,"column":69}},"12":{"start":{"line":13,"column":17},"end":{"line":13,"column":63}},"13":{"start":{"line":14,"column":4},"end":{"line":19,"column":5}},"14":{"start":{"line":15,"column":8},"end":{"line":18,"column":11}},"15":{"start":{"line":17,"column":56},"end":{"line":17,"column":71}},"16":{"start":{"line":20,"column":18},"end":{"line":20,"column":37}},"17":{"start":{"line":21,"column":4},"end":{"line":21,"column":32}},"18":{"start":{"line":22,"column":4},"end":{"line":22,"column":54}},"19":{"start":{"line":23,"column":4},"end":{"line":32,"column":7}},"20":{"start":{"line":25,"column":22},"end":{"line":25,"column":68}},"21":{"start":{"line":26,"column":8},"end":{"line":26,"column":39}},"22":{"start":{"line":27,"column":8},"end":{"line":31,"column":11}},"23":{"start":{"line":34,"column":12},"end":{"line":66,"column":1}},"24":{"start":{"line":35,"column":23},"end":{"line":35,"column":55}},"25":{"start":{"line":36,"column":13},"end":{"line":36,"column":21}},"26":{"start":{"line":36,"column":34},"end":{"line":36,"column":45}},"27":{"start":{"line":36,"column":58},"end":{"line":36,"column":69}},"28":{"start":{"line":37,"column":4},"end":{"line":65,"column":7}},"29":{"start":{"line":38,"column":8},"end":{"line":64,"column":9}},"30":{"start":{"line":39,"column":24},"end":{"line":39,"column":82}},"31":{"start":{"line":40,"column":12},"end":{"line":57,"column":13}},"32":{"start":{"line":41,"column":16},"end":{"line":50,"column":19}},"33":{"start":{"line":53,"column":16},"end":{"line":56,"column":19}},"34":{"start":{"line":60,"column":12},"end":{"line":63,"column":15}},"35":{"start":{"line":67,"column":16},"end":{"line":75,"column":1}},"36":{"start":{"line":68,"column":4},"end":{"line":74,"column":7}},"37":{"start":{"line":69,"column":8},"end":{"line":73,"column":11}},"38":{"start":{"line":76,"column":13},"end":{"line":84,"column":1}},"39":{"start":{"line":77,"column":4},"end":{"line":83,"column":7}},"40":{"start":{"line":85,"column":0},"end":{"line":90,"column":2}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":13},"end":{"line":11,"column":14}},"loc":{"start":{"line":11,"column":33},"end":{"line":33,"column":1}},"line":11},"2":{"name":"(anonymous_2)","decl":{"start":{"line":17,"column":39},"end":{"line":17,"column":40}},"loc":{"start":{"line":17,"column":54},"end":{"line":17,"column":73}},"line":17},"3":{"name":"(anonymous_3)","decl":{"start":{"line":24,"column":14},"end":{"line":24,"column":15}},"loc":{"start":{"line":24,"column":30},"end":{"line":32,"column":5}},"line":24},"4":{"name":"(anonymous_4)","decl":{"start":{"line":34,"column":12},"end":{"line":34,"column":13}},"loc":{"start":{"line":34,"column":32},"end":{"line":66,"column":1}},"line":34},"5":{"name":"(anonymous_5)","decl":{"start":{"line":37,"column":55},"end":{"line":37,"column":56}},"loc":{"start":{"line":37,"column":76},"end":{"line":65,"column":5}},"line":37},"6":{"name":"(anonymous_6)","decl":{"start":{"line":67,"column":16},"end":{"line":67,"column":17}},"loc":{"start":{"line":67,"column":36},"end":{"line":75,"column":1}},"line":67},"7":{"name":"(anonymous_7)","decl":{"start":{"line":68,"column":71},"end":{"line":68,"column":72}},"loc":{"start":{"line":68,"column":92},"end":{"line":74,"column":5}},"line":68},"8":{"name":"(anonymous_8)","decl":{"start":{"line":76,"column":13},"end":{"line":76,"column":14}},"loc":{"start":{"line":76,"column":33},"end":{"line":84,"column":1}},"line":76}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":14,"column":4},"end":{"line":19,"column":5}},"type":"if","locations":[{"start":{"line":14,"column":4},"end":{"line":19,"column":5}},{"start":{"line":14,"column":4},"end":{"line":19,"column":5}}],"line":14},"4":{"loc":{"start":{"line":38,"column":8},"end":{"line":64,"column":9}},"type":"if","locations":[{"start":{"line":38,"column":8},"end":{"line":64,"column":9}},{"start":{"line":38,"column":8},"end":{"line":64,"column":9}}],"line":38},"5":{"loc":{"start":{"line":40,"column":12},"end":{"line":57,"column":13}},"type":"if","locations":[{"start":{"line":40,"column":12},"end":{"line":57,"column":13}},{"start":{"line":40,"column":12},"end":{"line":57,"column":13}}],"line":40}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":5,"10":5,"11":5,"12":5,"13":5,"14":3,"15":3,"16":2,"17":2,"18":2,"19":2,"20":2,"21":2,"22":2,"23":1,"24":6,"25":6,"26":6,"27":6,"28":6,"29":6,"30":5,"31":5,"32":4,"33":1,"34":1,"35":1,"36":2,"37":2,"38":1,"39":1,"40":1},"f":{"0":1,"1":5,"2":3,"3":2,"4":6,"5":6,"6":2,"7":2,"8":1},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1],"3":[3,2],"4":[5,1],"5":[4,1]},"inputSourceMap":{"version":3,"file":"/home/rick/Dokumente/Privat/golden-key/src/server/controllers/api/users.ts","sources":["/home/rick/Dokumente/Privat/golden-key/src/server/controllers/api/users.ts"],"names":[],"mappings":";;;;;AAAA,yBAAuB;AAEvB,uDAAqD;AACrD,8DAAwC;AAExC,uCAA4C;AAC5C,wCAAqC;AAErC,IAAM,MAAM,GAAG,UAAC,GAAa,EAAE,GAAc;IAEnC,IAAA,KAAyB,GAAG,CAAC,IAAI,EAA/B,QAAQ,cAAA,EAAE,QAAQ,cAAa,CAAC;IAExC,IAAM,MAAM,GAAG,IAAA,oCAAgB,EAAC,GAAG,CAAC,CAAC;IAErC,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,EACrB;QACI,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YACxB,OAAO,EAAE,KAAK;YACd,MAAM,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,GAAG,CAAC,UAAA,GAAG,IAAI,OAAA,GAAG,CAAC,GAAG,EAAP,CAAO,CAAC;SAC7C,CAAC,CAAC;KACN;IAED,IAAM,OAAO,GAAG,IAAI,aAAI,EAAE,CAAC;IAE3B,OAAO,CAAC,QAAQ,GAAG,QAAQ,CAAC;IAC5B,OAAO,CAAC,QAAQ,GAAG,OAAO,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;IAElD,OAAO,CAAC,IAAI,EAAE;SACT,IAAI,CAAC,UAAC,IAAI;QAEP,IAAM,OAAO,GAAG,mBAAa,IAAI,CAAC,QAAQ,cAAY,CAAC;QAEvD,gBAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAErB,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YACjB,OAAO,EAAE,IAAI;YACb,IAAI,MAAA;YACJ,OAAO,SAAA;SACV,CAAC,CAAC;IACP,CAAC,CAAC,CAAC;AACX,CAAC,CAAC;AAEF,IAAM,KAAK,GAAG,UAAC,GAAY,EAAE,GAAa;IAEtC,IAAM,YAAY,GAAG,gCAAgC,CAAC;IAEhD,IAAA,KAAyB,GAAG,CAAC,IAAI,EAA/B,QAAQ,cAAA,EAAE,QAAQ,cAAa,CAAC;IAExC,aAAI,CAAC,OAAO,CAAC,EAAE,QAAQ,UAAA,EAAE,CAAC,CAAC,IAAI,CAAC,UAAA,SAAS;QAErC,IAAG,SAAS,EACZ;YACI,IAAM,KAAK,GAAG,mBAAW,CAAC,IAAI,CAAC,EAAE,QAAQ,EAAE,SAAS,CAAC,QAAQ,EAAE,CAAC,CAAC;YAEjE,IAAG,SAAS,CAAC,eAAe,CAAC,QAAQ,CAAC,EACtC;gBACI,GAAG;qBACE,MAAM,CAAC,cAAc,EAAE,KAAK,EAAE;oBAC3B,kBAAkB;oBAClB,MAAM,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE;iBACvB,CAAC;qBACD,MAAM,CAAC,GAAG,CAAC;qBACX,IAAI,CAAC;oBACF,OAAO,EAAE,IAAI;oBACb,OAAO,EAAE,gBAAU,SAAS,CAAC,QAAQ,gBAAc;iBACtD,CAAC,CAAC;aACV;iBAED;gBACI,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;oBACjB,OAAO,EAAE,KAAK;oBACd,MAAM,EAAE,CAAE,YAAY,CAAE;iBAC3B,CAAC,CAAC;aACN;SACJ;aAED;YACI,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;gBACjB,OAAO,EAAE,KAAK;gBACd,MAAM,EAAE,CAAE,YAAY,CAAE;aAC3B,CAAC,CAAC;SACN;IACL,CAAC,CAAC,CAAC;AACP,CAAC,CAAC;AAEF,IAAM,SAAS,GAAG,UAAC,GAAY,EAAE,GAAa;IAE1C,aAAI,CAAC,OAAO,CAAC,EAAE,QAAQ,EAAE,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC,IAAI,CAAC,UAAA,SAAS;QAE/D,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YACjB,OAAO,EAAE,IAAI;YACb,IAAI,EAAE,SAAS;YACf,OAAO,EAAE,oBAAoB;SAChC,CAAC,CAAC;IACP,CAAC,CAAC,CAAC;AACP,CAAC,CAAC;AAEF,IAAM,MAAM,GAAG,UAAC,GAAY,EAAE,GAAa;IAEvC,OAAO,GAAG;SACL,WAAW,CAAC,cAAc,CAAC;SAC3B,MAAM,CAAC,GAAG,CAAC;SACX,IAAI,CAAC;QACF,OAAO,EAAE,IAAI;QACb,OAAO,EAAE,iBAAiB;KAC7B,CAAC,CAAC;AACX,CAAC,CAAC;AAEF,kBAAe;IACX,MAAM,QAAA;IACN,KAAK,OAAA;IACL,SAAS,WAAA;IACT,MAAM,QAAA;CACT,CAAC","sourcesContent":["import 'dotenv/config';\nimport { Request, Response } from 'express';\nimport { validationResult } from 'express-validator';\nimport logger from '../../utils/logger';\n\nimport { accessToken } from './../../utils';\nimport { User } from '../../models/';\n\nconst signup = (req : Request, res : Response) =>\n{\n    const { username, password } = req.body;\n\n    const errors = validationResult(req);\n\n    if (!errors.isEmpty())\n    {\n        return res.status(200).json({\n            success: false,\n            errors: errors.array().map(err => err.msg)\n        });\n    }\n\n    const newUser = new User();\n\n    newUser.username = username;\n    newUser.password = newUser.hashPassword(password);\n\n    newUser.save()\n        .then((user) =>\n        {\n            const message = `New user ${ user.username } created!`;\n\n            logger.info(message);\n\n            res.status(200).json({\n                success: true,\n                user,\n                message\n            });\n        });\n};\n\nconst login = (req: Request, res: Response) =>\n{\n    const errorMessage = 'Username or Password incorrect';\n\n    const { username, password } = req.body;\n    \n    User.findOne({ username }).then(foundUser =>\n    {\n        if(foundUser)\n        {\n            const token = accessToken.sign({ username: foundUser.username });\n\n            if(foundUser.comparePassword(password))\n            {\n                res\n                    .cookie('access_token', token, {\n                        // httpOnly: true,\n                        maxAge: 24 * 60 * 60\n                    })\n                    .status(200)\n                    .json({\n                        success: true,\n                        message: `User '${ foundUser.username }' logged in`\n                    });\n            }\n            else\n            {\n                res.status(200).json({\n                    success: false,\n                    errors: [ errorMessage ]\n                });\n            }\n        }\n        else\n        {\n            res.status(200).json({\n                success: false,\n                errors: [ errorMessage ]\n            });\n        }\n    });\n};\n\nconst authorize = (req: Request, res: Response) =>\n{\n    User.findOne({ username: res.locals.user.username }).then(foundUser =>\n    {\n        res.status(200).json({\n            success: true,\n            user: foundUser,\n            message: 'user authenticated'\n        });\n    });\n};\n\nconst logout = (req: Request, res: Response) =>\n{\n    return res\n        .clearCookie('access_token')\n        .status(200)\n        .json({\n            success: true,\n            message: 'User logged out'\n        });\n};\n\nexport default {\n    signup,\n    login,\n    authorize,\n    logout\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"610e4ca853b627d218cab6fe59b3ae8b6e3c1078"},"/home/rick/Dokumente/Privat/golden-key/src/server/utils/index.ts":{"path":"/home/rick/Dokumente/Privat/golden-key/src/server/utils/index.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":46}},"4":{"start":{"line":7,"column":15},"end":{"line":7,"column":51}},"5":{"start":{"line":8,"column":0},"end":{"line":8,"column":34}},"6":{"start":{"line":9,"column":20},"end":{"line":9,"column":61}},"7":{"start":{"line":10,"column":0},"end":{"line":10,"column":44}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":2,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1},"f":{"0":2},"b":{"0":[1,1,1],"1":[2,0],"2":[2,2]},"inputSourceMap":{"version":3,"file":"/home/rick/Dokumente/Privat/golden-key/src/server/utils/index.ts","sources":["/home/rick/Dokumente/Privat/golden-key/src/server/utils/index.ts"],"names":[],"mappings":";;;;;;AAAA,oDAA8B;AAI1B,iBAJG,gBAAM,CAIH;AAHV,8DAAwC;AAIpC,sBAJG,qBAAW,CAIH","sourcesContent":["import logger from './logger';\nimport accessToken from './accessToken';\n\nexport {\n    logger,\n    accessToken\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ebe402b99b6e01c207ae81c46b8f91ce4460701d"},"/home/rick/Dokumente/Privat/golden-key/src/server/utils/accessToken.ts":{"path":"/home/rick/Dokumente/Privat/golden-key/src/server/utils/accessToken.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"4":{"start":{"line":7,"column":21},"end":{"line":7,"column":61}},"5":{"start":{"line":8,"column":11},"end":{"line":11,"column":1}},"6":{"start":{"line":9,"column":17},"end":{"line":9,"column":49}},"7":{"start":{"line":10,"column":4},"end":{"line":10,"column":77}},"8":{"start":{"line":12,"column":0},"end":{"line":12,"column":33}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":11},"end":{"line":8,"column":12}},"loc":{"start":{"line":8,"column":27},"end":{"line":11,"column":1}},"line":8}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":5,"7":5,"8":1},"f":{"0":1,"1":5},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"/home/rick/Dokumente/Privat/golden-key/src/server/utils/accessToken.ts","sources":["/home/rick/Dokumente/Privat/golden-key/src/server/utils/accessToken.ts"],"names":[],"mappings":";;;;;AAAA,yBAAuB;AACvB,8DAA+B;AAO/B,IAAM,IAAI,GAAG,UAAC,IAAgB;IAE1B,IAAM,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;IAEhD,OAAO,sBAAG,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,EAAE,EAAE,SAAS,EAAE,OAAO,EAAE,CAAC,CAAC;AAC1D,CAAC,CAAC;AAEF,kBAAe,EAAE,IAAI,MAAA,EAAE,CAAC","sourcesContent":["import 'dotenv/config';\nimport jwt from 'jsonwebtoken';\n\ninterface IUserData\n{\n    username: string;\n}\n\nconst sign = (data : IUserData) =>\n{\n    const secret = String(process.env.SECRET_TOKEN);\n\n    return jwt.sign(data, secret, { expiresIn: '1800s' });\n};\n\nexport default { sign };\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a41ec8c5248a1da5167a7e50e4d464dd8a2ad42e"},"/home/rick/Dokumente/Privat/golden-key/src/server/models/index.ts":{"path":"/home/rick/Dokumente/Privat/golden-key/src/server/models/index.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":22}},"4":{"start":{"line":7,"column":13},"end":{"line":7,"column":47}},"5":{"start":{"line":8,"column":0},"end":{"line":8,"column":30}},"6":{"start":{"line":9,"column":0},"end":{"line":9,"column":54}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1},"f":{"0":1},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1]},"inputSourceMap":{"version":3,"file":"/home/rick/Dokumente/Privat/golden-key/src/server/models/index.ts","sources":["/home/rick/Dokumente/Privat/golden-key/src/server/models/index.ts"],"names":[],"mappings":";;;;;;AAAA,gDAA0B;AAGjB,eAHF,cAAI,CAGE;AADb,kBAAe,EAAE,IAAI,EAAE,EAAE,KAAK,EAAE,cAAI,EAAE,EAAE,CAAC","sourcesContent":["import User from './User';\n\nexport default { user: { model: User } };\nexport { User };\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"9baeb3787d5a6624113f1ab85ca90160cb7d3fd1"},"/home/rick/Dokumente/Privat/golden-key/src/server/models/User.ts":{"path":"/home/rick/Dokumente/Privat/golden-key/src/server/models/User.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"4":{"start":{"line":7,"column":17},"end":{"line":7,"column":36}},"5":{"start":{"line":8,"column":15},"end":{"line":8,"column":49}},"6":{"start":{"line":9,"column":13},"end":{"line":9,"column":37}},"7":{"start":{"line":10,"column":13},"end":{"line":23,"column":2}},"8":{"start":{"line":20,"column":12},"end":{"line":20,"column":32}},"9":{"start":{"line":24,"column":0},"end":{"line":30,"column":2}},"10":{"start":{"line":25,"column":15},"end":{"line":28,"column":22}},"11":{"start":{"line":29,"column":4},"end":{"line":29,"column":16}},"12":{"start":{"line":31,"column":0},"end":{"line":36,"column":2}},"13":{"start":{"line":32,"column":4},"end":{"line":34,"column":5}},"14":{"start":{"line":33,"column":8},"end":{"line":33,"column":21}},"15":{"start":{"line":35,"column":4},"end":{"line":35,"column":16}},"16":{"start":{"line":37,"column":16},"end":{"line":37,"column":62}},"17":{"start":{"line":38,"column":0},"end":{"line":38,"column":28}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":19,"column":19},"end":{"line":19,"column":20}},"loc":{"start":{"line":19,"column":39},"end":{"line":21,"column":9}},"line":19},"2":{"name":"(anonymous_2)","decl":{"start":{"line":24,"column":30},"end":{"line":24,"column":31}},"loc":{"start":{"line":24,"column":50},"end":{"line":30,"column":1}},"line":24},"3":{"name":"(anonymous_3)","decl":{"start":{"line":31,"column":33},"end":{"line":31,"column":34}},"loc":{"start":{"line":31,"column":58},"end":{"line":36,"column":1}},"line":31}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":32,"column":4},"end":{"line":34,"column":5}},"type":"if","locations":[{"start":{"line":32,"column":4},"end":{"line":34,"column":5}},{"start":{"line":32,"column":4},"end":{"line":34,"column":5}}],"line":32}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":4,"9":1,"10":7,"11":7,"12":1,"13":5,"14":1,"15":4,"16":1,"17":1},"f":{"0":1,"1":4,"2":7,"3":5},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[1,4]},"inputSourceMap":{"version":3,"file":"/home/rick/Dokumente/Privat/golden-key/src/server/models/User.ts","sources":["/home/rick/Dokumente/Privat/golden-key/src/server/models/User.ts"],"names":[],"mappings":";;;;;AAAA,yBAAuB;AACvB,qCAAmD;AACnD,kDAA4B;AAE5B,IAAM,MAAM,GAAG,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC;AAiBxC,IAAM,MAAM,GAAY,IAAI,iBAAM,CAAa;IAC3C,QAAQ,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE;IACxD,QAAQ,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IAC1C,SAAS,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE;IACzB,GAAG,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE;IACrB,OAAO,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE;CAC5B,EACD;IACI,UAAU,EAAE,IAAI;IAChB,MAAM,EACN;QACI,SAAS,EAAE,UAAC,GAAG,EAAE,GAAG;YAEhB,OAAO,GAAG,CAAC,QAAQ,CAAC;QACxB,CAAC;KACJ;CACJ,CAAC,CAAC;AAEH,MAAM,CAAC,OAAO,CAAC,YAAY,GAAG,UAAC,QAAiB;IAE5C,IAAM,IAAI,GAAY,gBAAM;SACvB,UAAU,CAAC,QAAQ,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC;SACpC,MAAM,CAAC,QAAQ,CAAC;SAChB,MAAM,CAAC,KAAK,CAAC,CAAC;IACnB,OAAO,IAAI,CAAC;AAChB,CAAC,CAAC;AAEF,MAAM,CAAC,OAAO,CAAC,eAAe,GAAG,UAAU,aAAsB;IAE7D,IAAG,IAAI,CAAC,QAAQ,KAAK,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,EACrD;QACI,OAAO,KAAK,CAAC;KAChB;IAED,OAAO,IAAI,CAAC;AAChB,CAAC,CAAC;AAEF,IAAM,SAAS,GAAG,IAAA,gBAAK,EAAa,MAAM,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC;AAE7D,kBAAe,SAAS,CAAC","sourcesContent":["import 'dotenv/config';\nimport { Schema, Document, model } from 'mongoose';\nimport crypto from 'crypto';\n\nconst secret = process.env.SECRET_TOKEN;\n\ninterface IUser\n{\n    username: string;\n    password: string;\n    lastlogin: Date;\n    age: number;\n    country: string;\n}\n\nexport interface IUserModel extends IUser, Document\n{\n    hashPassword(password : any): string;\n    comparePassword(loginPassword : any): boolean;\n}\n\nconst schema : Schema = new Schema<IUserModel>({\n    username: { type: String, required: true, unique: true },\n    password: { type: String, required: true },\n    lastlogin: { type: Date }, \n    age: { type: Number },\n    country: { type: String }\n},\n{\n    timestamps: true,\n    toJSON:\n    {\n        transform: (doc, ret) =>\n        {\n            delete ret.password;\n        }\n    }\n});\n\nschema.methods.hashPassword = (password : string) : string =>\n{\n    const hash : string = crypto\n        .createHmac('sha256', String(secret))\n        .update(password)\n        .digest('hex');\n    return hash;\n};\n\nschema.methods.comparePassword = function (loginPassword : string) : boolean\n{\n    if(this.password !== this.hashPassword(loginPassword))\n    {\n        return false;\n    }\n\n    return true;\n};\n\nconst userModel = model<IUserModel>('User', schema, 'users');\n\nexport default userModel;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2d040d35879db90402d7b07af00b1c45dfd0e27f"},"/home/rick/Dokumente/Privat/golden-key/src/server/routes/api/users.ts":{"path":"/home/rick/Dokumente/Privat/golden-key/src/server/routes/api/users.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":16},"end":{"line":6,"column":34}},"4":{"start":{"line":7,"column":20},"end":{"line":7,"column":65}},"5":{"start":{"line":8,"column":20},"end":{"line":8,"column":67}},"6":{"start":{"line":9,"column":20},"end":{"line":9,"column":67}},"7":{"start":{"line":10,"column":13},"end":{"line":10,"column":36}},"8":{"start":{"line":11,"column":0},"end":{"line":11,"column":228}},"9":{"start":{"line":12,"column":0},"end":{"line":12,"column":63}},"10":{"start":{"line":13,"column":0},"end":{"line":13,"column":105}},"11":{"start":{"line":14,"column":0},"end":{"line":14,"column":65}},"12":{"start":{"line":15,"column":0},"end":{"line":15,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":3,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1},"f":{"0":3},"b":{"0":[1,1,1],"1":[3,0],"2":[3,3]},"inputSourceMap":{"version":3,"file":"/home/rick/Dokumente/Privat/golden-key/src/server/routes/api/users.ts","sources":["/home/rick/Dokumente/Privat/golden-key/src/server/routes/api/users.ts"],"names":[],"mappings":";;;;;AAAA,mCAAiC;AACjC,kEAA4C;AAC5C,oEAA8C;AAC9C,oEAA8C;AAE9C,IAAM,MAAM,GAAG,IAAA,gBAAM,GAAE,CAAC;AAExB,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,CAClB,qBAAW,CAAC,KAAK,CAAC,QAAQ,EAC1B,qBAAW,CAAC,KAAK,CAAC,oBAAoB,EACtC,qBAAW,CAAC,KAAK,CAAC,aAAa,EAC/B,qBAAW,CAAC,KAAK,CAAC,QAAQ,EAC1B,qBAAW,CAAC,KAAK,CAAC,MAAM,CAC3B,CAAC;AAEF,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,IAAI,CACvB,qBAAW,CAAC,KAAK,CAAC,KAAK,CAC1B,CAAC;AAEF,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,CACtB,qBAAW,CAAC,KAAK,CAAC,SAAS,EAC3B,qBAAW,CAAC,KAAK,CAAC,SAAS,CAC9B,CAAC;AAEF,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,IAAI,CACxB,qBAAW,CAAC,KAAK,CAAC,MAAM,CAC3B,CAAC;AAEF,kBAAe,MAAM,CAAC","sourcesContent":["import { Router } from 'express';\nimport controllers from '../../controllers';\nimport validations from './../../validations';\nimport middlewares from './../../middlewares';\n\nconst router = Router();\n\nrouter.route('/').post(\n    validations.users.password,\n    validations.users.passwordConfirmation,\n    validations.users.allreadyExits,\n    validations.users.username,\n    controllers.users.signup\n);\n\nrouter.route('/login').post(\n    controllers.users.login\n);\n\nrouter.route('/auth').post(\n    middlewares.users.authorize,\n    controllers.users.authorize\n);\n\nrouter.route('/logout').post(\n    controllers.users.logout\n);\n\nexport default router;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"020fc2d12c0753d831d51f8aa9d9f809ab527fe0"},"/home/rick/Dokumente/Privat/golden-key/src/server/validations/index.ts":{"path":"/home/rick/Dokumente/Privat/golden-key/src/server/validations/index.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":14},"end":{"line":6,"column":49}},"4":{"start":{"line":7,"column":0},"end":{"line":7,"column":45}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{"0":1},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1]},"inputSourceMap":{"version":3,"file":"/home/rick/Dokumente/Privat/golden-key/src/server/validations/index.ts","sources":["/home/rick/Dokumente/Privat/golden-key/src/server/validations/index.ts"],"names":[],"mappings":";;;;;AAAA,kDAA4B;AAE5B,kBAAe,EAAE,KAAK,iBAAA,EAAE,CAAC","sourcesContent":["import users from './users';\n\nexport default { users };\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f896c1f4c94cd0bbd5631e1c4e74aa7aed069094"},"/home/rick/Dokumente/Privat/golden-key/src/server/validations/users.ts":{"path":"/home/rick/Dokumente/Privat/golden-key/src/server/validations/users.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":26},"end":{"line":6,"column":54}},"4":{"start":{"line":7,"column":13},"end":{"line":7,"column":55}},"5":{"start":{"line":8,"column":27},"end":{"line":14,"column":2}},"6":{"start":{"line":9,"column":14},"end":{"line":9,"column":20}},"7":{"start":{"line":10,"column":4},"end":{"line":12,"column":5}},"8":{"start":{"line":11,"column":8},"end":{"line":11,"column":50}},"9":{"start":{"line":13,"column":4},"end":{"line":13,"column":16}},"10":{"start":{"line":15,"column":20},"end":{"line":21,"column":2}},"11":{"start":{"line":16,"column":4},"end":{"line":20,"column":7}},"12":{"start":{"line":17,"column":8},"end":{"line":19,"column":9}},"13":{"start":{"line":18,"column":12},"end":{"line":18,"column":58}},"14":{"start":{"line":22,"column":15},"end":{"line":24,"column":45}},"15":{"start":{"line":25,"column":15},"end":{"line":27,"column":53}},"16":{"start":{"line":28,"column":0},"end":{"line":33,"column":2}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":88},"end":{"line":8,"column":89}},"loc":{"start":{"line":8,"column":109},"end":{"line":14,"column":1}},"line":8},"2":{"name":"(anonymous_2)","decl":{"start":{"line":15,"column":69},"end":{"line":15,"column":70}},"loc":{"start":{"line":15,"column":86},"end":{"line":21,"column":1}},"line":15},"3":{"name":"(anonymous_3)","decl":{"start":{"line":16,"column":60},"end":{"line":16,"column":61}},"loc":{"start":{"line":16,"column":76},"end":{"line":20,"column":5}},"line":16}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":10,"column":4},"end":{"line":12,"column":5}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":12,"column":5}},{"start":{"line":10,"column":4},"end":{"line":12,"column":5}}],"line":10},"4":{"loc":{"start":{"line":17,"column":8},"end":{"line":19,"column":9}},"type":"if","locations":[{"start":{"line":17,"column":8},"end":{"line":19,"column":9}},{"start":{"line":17,"column":8},"end":{"line":19,"column":9}}],"line":17}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":5,"7":5,"8":1,"9":4,"10":1,"11":5,"12":5,"13":1,"14":1,"15":1,"16":1},"f":{"0":1,"1":5,"2":5,"3":5},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1],"3":[1,4],"4":[1,4]},"inputSourceMap":{"version":3,"file":"/home/rick/Dokumente/Privat/golden-key/src/server/validations/users.ts","sources":["/home/rick/Dokumente/Privat/golden-key/src/server/validations/users.ts"],"names":[],"mappings":";;;;;AAAA,uDAAyC;AACzC,wDAAkC;AAElC,IAAM,oBAAoB,GAAG,IAAA,wBAAI,EAAC,sBAAsB,CAAC,CAAC,MAAM,CAAC,UAAC,KAAK,EAAE,EAAO;QAAL,GAAG,SAAA;IAE1E,IAAI,KAAK,KAAK,GAAG,CAAC,IAAI,CAAC,QAAQ,EAC/B;QACI,MAAM,IAAI,KAAK,CAAC,wBAAwB,CAAC,CAAC;KAC7C;IAED,OAAO,IAAI,CAAC;AAChB,CAAC,CAAC,CAAC;AAEH,IAAM,aAAa,GAAG,IAAA,wBAAI,EAAC,UAAU,CAAC,CAAC,MAAM,CAAC,UAAC,KAAK;IAEhD,OAAO,cAAI,CAAC,OAAO,CAAC,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,CAAC,IAAI,CAAC,UAAA,IAAI;QAE9C,IAAG,IAAI,EACP;YACI,OAAO,OAAO,CAAC,MAAM,CAAC,sBAAsB,CAAC,CAAC;SACjD;IACL,CAAC,CAAC,CAAC;AACP,CAAC,CAAC,CAAC;AAEH,IAAM,QAAQ,GAAG,IAAA,wBAAI,EAAC,UAAU,CAAC;KAC5B,QAAQ,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE,CAAC;KAC7B,WAAW,CAAC,2BAA2B,CAAC,CAAC;AAE9C,IAAM,QAAQ,GAAG,IAAA,wBAAI,EAAC,UAAU,CAAC;KAC5B,OAAO,EAAE;KACT,WAAW,CAAC,mCAAmC,CAAC,CAAC;AAEtD,kBAAe;IACX,oBAAoB,sBAAA;IACpB,aAAa,eAAA;IACb,QAAQ,UAAA;IACR,QAAQ,UAAA;CACX,CAAC","sourcesContent":["import { body } from 'express-validator';\nimport User from '../models/User';\n\nconst passwordConfirmation = body('passwordConfirmation').custom((value, { req }) =>\n{\n    if (value !== req.body.password)\n    {\n        throw new Error('Passwords do not match');\n    }\n\n    return true;\n});\n\nconst allreadyExits = body('username').custom((value) =>\n{\n    return User.findOne({ username: value }).then(user =>\n    {\n        if(user)\n        {\n            return Promise.reject('User already exists!');\n        }\n    });\n});\n\nconst password = body('password')\n    .isLength({ min: 8, max: 16 })\n    .withMessage('Password must be stronger');\n\nconst username = body('username')\n    .isEmail()\n    .withMessage('Username must be an email adress!');\n\nexport default {\n    passwordConfirmation,\n    allreadyExits,\n    password,\n    username\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7adc34b39e89678e3a0d177a44ba31a35ae66fdb"},"/home/rick/Dokumente/Privat/golden-key/src/server/middlewares/index.ts":{"path":"/home/rick/Dokumente/Privat/golden-key/src/server/middlewares/index.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":14},"end":{"line":6,"column":49}},"4":{"start":{"line":7,"column":0},"end":{"line":7,"column":45}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{"0":1},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1]},"inputSourceMap":{"version":3,"file":"/home/rick/Dokumente/Privat/golden-key/src/server/middlewares/index.ts","sources":["/home/rick/Dokumente/Privat/golden-key/src/server/middlewares/index.ts"],"names":[],"mappings":";;;;;AAAA,kDAA4B;AAE5B,kBAAe,EAAE,KAAK,iBAAA,EAAE,CAAC","sourcesContent":["import users from './users';\n\nexport default { users };\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a0858d7b71d4ef725279c14daecaa3a03b41790a"},"/home/rick/Dokumente/Privat/golden-key/src/server/middlewares/users.ts":{"path":"/home/rick/Dokumente/Privat/golden-key/src/server/middlewares/users.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"4":{"start":{"line":7,"column":21},"end":{"line":7,"column":61}},"5":{"start":{"line":8,"column":16},"end":{"line":22,"column":1}},"6":{"start":{"line":9,"column":17},"end":{"line":9,"column":49}},"7":{"start":{"line":10,"column":16},"end":{"line":10,"column":40}},"8":{"start":{"line":11,"column":4},"end":{"line":13,"column":5}},"9":{"start":{"line":12,"column":8},"end":{"line":12,"column":35}},"10":{"start":{"line":14,"column":4},"end":{"line":21,"column":5}},"11":{"start":{"line":15,"column":19},"end":{"line":15,"column":63}},"12":{"start":{"line":16,"column":8},"end":{"line":16,"column":31}},"13":{"start":{"line":17,"column":8},"end":{"line":17,"column":15}},"14":{"start":{"line":20,"column":8},"end":{"line":20,"column":35}},"15":{"start":{"line":23,"column":0},"end":{"line":23,"column":43}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":16},"end":{"line":8,"column":17}},"loc":{"start":{"line":8,"column":42},"end":{"line":22,"column":1}},"line":8}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":11,"column":4},"end":{"line":13,"column":5}},"type":"if","locations":[{"start":{"line":11,"column":4},"end":{"line":13,"column":5}},{"start":{"line":11,"column":4},"end":{"line":13,"column":5}}],"line":11}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":4,"7":4,"8":4,"9":1,"10":3,"11":3,"12":2,"13":2,"14":1,"15":1},"f":{"0":1,"1":4},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[1,3]},"inputSourceMap":{"version":3,"file":"/home/rick/Dokumente/Privat/golden-key/src/server/middlewares/users.ts","sources":["/home/rick/Dokumente/Privat/golden-key/src/server/middlewares/users.ts"],"names":[],"mappings":";;;;;AAAA,yBAAuB;AAEvB,8DAA+B;AAE/B,IAAM,SAAS,GAAG,UAAC,GAAa,EAAE,GAAa,EAAE,IAAkB;IAE/D,IAAM,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;IAEhD,IAAM,KAAK,GAAG,GAAG,CAAC,OAAO,CAAC,YAAY,CAAC;IAEvC,IAAG,CAAC,KAAK,EACT;QACI,OAAO,GAAG,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;KAC9B;IACD,IACA;QACI,IAAM,IAAI,GAAG,sBAAG,CAAC,MAAM,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;QACvC,GAAG,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC;QAEvB,IAAI,EAAE,CAAC;KACV;IACD,WACA;QACI,OAAO,GAAG,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;KAC9B;AACL,CAAC,CAAC;AAEF,kBAAe,EAAE,SAAS,WAAA,EAAE,CAAC","sourcesContent":["import 'dotenv/config';\nimport { NextFunction, Request, Response } from 'express';\nimport jwt from 'jsonwebtoken';\n\nconst authorize = (req : Request, res: Response, next: NextFunction) =>\n{\n    const secret = String(process.env.SECRET_TOKEN);\n\n    const token = req.cookies.access_token;\n\n    if(!token)\n    {\n        return res.sendStatus(403);\n    }\n    try\n    {\n        const data = jwt.verify(token, secret);\n        res.locals.user = data;\n        \n        next();\n    }\n    catch\n    {\n        return res.sendStatus(403);\n    }\n};\n\nexport default { authorize };\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"9d1c2ebec864d36939987940c2426945bae6ca84"}}